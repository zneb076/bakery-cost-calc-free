import{s as Ye,t as pe,e as z,f as j,g as it,h as gt,i as Aa,w as fe,c as V,o as M,a as d,j as R,k as la,l as de,m as Tt,n as Et,p as Y,F as qe,q as $e,u as Z,T as Ba,v as qa,x as Qe,y as Kt,z as Da,d as Yt,A as Qt,B as We,C as Ve,b as Oe,D as Ra,E as Ia}from"./index-BjnW3rBN.js";import{d as ct}from"./sweetalert2.esm.all-BmAA-hg4.js";import{_ as Na}from"./BaseModal-Bzxuumhg.js";function Se(e){return e==null}function Ma(e,a,t){const{object:r,valueProp:n,mode:c}=pe(e),l=it().proxy,s=t.iv,p=(w,L=!0)=>{s.value=o(w);const y=m(w);a.emit("change",y,l),L&&(a.emit("input",y),a.emit("update:modelValue",y))},m=w=>r.value||Se(w)?w:Array.isArray(w)?w.map(L=>L[n.value]):w[n.value],o=w=>Se(w)?c.value==="single"?{}:[]:w;return{update:p}}function te(e){return qa(()=>({get:e,set:()=>{}}))}function Fa(e,a){const{value:t,modelValue:r,mode:n,valueProp:c}=pe(e),l=z(n.value!=="single"?[]:{}),s=te(()=>r.value!==void 0?r.value:t.value),p=j(()=>n.value==="single"?l.value[c.value]:l.value.map(o=>o[c.value])),m=te(()=>n.value!=="single"?l.value.map(o=>o[c.value]).join(","):l.value[c.value]);return{iv:l,internalValue:l,ev:s,externalValue:s,textValue:m,plainValue:p}}function ja(e,a,t){const{regex:r}=pe(e),n=it().proxy,c=t.isOpen,l=t.open,s=z(null),p=()=>{s.value=""},m=L=>{s.value=L.target.value},o=L=>{if(r.value){let y=r.value;typeof y=="string"&&(y=new RegExp(y)),L.key.match(y)||L.preventDefault()}},w=L=>{if(r.value){let S=(L.clipboardData||window.clipboardData).getData("Text"),C=r.value;typeof C=="string"&&(C=new RegExp(C)),S.split("").every(E=>!!E.match(C))||L.preventDefault()}a.emit("paste",L,n)};return fe(s,L=>{!c.value&&L&&l(),a.emit("search-change",L,n)}),{search:s,clearSearch:p,handleSearchInput:m,handleKeypress:o,handlePaste:w}}function Wa(e,a,t){const{groupSelect:r,mode:n,groups:c,disabledProp:l}=pe(e),s=z(null),p=o=>{o===void 0||o!==null&&o[l.value]||c.value&&o&&o.group&&(n.value==="single"||!r.value)||(s.value=o)};return{pointer:s,setPointer:p,clearPointer:()=>{p(null)}}}function At(e,a=!0){return a?String(e).toLowerCase().trim():String(e).toLowerCase().normalize("NFD").trim().replace(/æ/g,"ae").replace(/œ/g,"oe").replace(/ø/g,"o").replace(new RegExp("\\p{Diacritic}","gu"),"")}function Va(e){return Object.prototype.toString.call(e)==="[object Object]"}function $a(e,a){if(e.length!==a.length)return!1;const t=a.slice().sort();return e.slice().sort().every(function(r,n){return r===t[n]})}const na=(e,a)=>{if(e===a)return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;const t=Object.keys(e),r=Object.keys(a);if(t.length!==r.length)return!1;for(let n of t)if(!r.includes(n)||!na(e[n],a[n]))return!1;return!0};function Ua(e,a,t){const{options:r,mode:n,trackBy:c,limit:l,hideSelected:s,createTag:p,createOption:m,label:o,appendNewTag:w,appendNewOption:L,multipleLabel:y,object:S,loading:C,delay:E,resolveOnLoad:O,minChars:q,filterResults:v,clearOnSearch:x,clearOnSelect:A,valueProp:b,allowAbsent:N,groupLabel:I,canDeselect:W,max:$,strict:H,closeOnSelect:B,closeOnDeselect:Q,groups:_,reverse:ne,infinite:X,groupOptions:G,groupHideEmpty:ge,groupSelect:P,onCreate:u,disabledProp:h,searchStart:F,searchFilter:ee}=pe(e),D=it().proxy,T=t.iv,f=t.ev,k=t.search,K=t.clearSearch,J=t.update,ae=t.pointer,ie=t.setPointer,be=t.clearPointer,Ne=t.focus,re=t.deactivate,se=t.close,Ae=t.localize,he=z([]),ce=z([]),oe=z(!1),ue=z(null),xe=z(X.value&&l.value===-1?10:l.value),st=j({get:()=>ce.value,set:i=>ce.value=i}),et=te(()=>p.value||m.value||!1),tt=te(()=>w.value!==void 0?w.value:L.value!==void 0?L.value:!0),ye=j(()=>{if(_.value){let i=Me.value||[],g=[];return i.forEach(U=>{Pt(U[G.value]).forEach(le=>{g.push(Object.assign({},le,U[h.value]?{[h.value]:!0}:{}))})}),g}else{let i=Pt(ce.value||[]);return he.value.length&&(i=i.concat(he.value)),i}}),at=j(()=>{let i=ye.value;return ne.value&&(i=i.reverse()),Ge.value.length&&(i=Ge.value.concat(i)),xt(i)}),Be=j(()=>{let i=at.value;return xe.value>0&&(i=i.slice(0,xe.value)),i}),Me=j(()=>{if(!_.value)return[];let i=[],g=ce.value||[];return he.value.length&&i.push({[I.value]:" ",[G.value]:[...he.value],__CREATE__:!0}),i.concat(g)}),fa=j(()=>{let i=[...Me.value].map(g=>({...g}));return Ge.value.length&&(i[0]&&i[0].__CREATE__?i[0][G.value]=[...Ge.value,...i[0][G.value]]:i=[{[I.value]:" ",[G.value]:[...Ge.value],__CREATE__:!0}].concat(i)),i}),wt=j(()=>{if(!_.value)return[];let i=fa.value;return Ca((i||[]).map((g,U)=>{const le=Pt(g[G.value]);return{...g,index:U,group:!0,[G.value]:xt(le,!1).map(je=>Object.assign({},je,g[h.value]?{[h.value]:!0}:{})),__VISIBLE__:xt(le).map(je=>Object.assign({},je,g[h.value]?{[h.value]:!0}:{}))}}))}),Ot=j(()=>{switch(n.value){case"single":return!Se(T.value[b.value]);case"multiple":case"tags":return!Se(T.value)&&T.value.length>0}}),va=j(()=>y.value!==void 0?y.value(T.value,D):T.value&&T.value.length>1?`${T.value.length} options selected`:"1 option selected"),pa=te(()=>!ye.value.length&&!oe.value&&!Ge.value.length),ma=te(()=>ye.value.length>0&&Be.value.length==0&&(k.value&&_.value||!_.value)),Ge=j(()=>et.value===!1||!k.value?[]:La(k.value)!==-1?[]:[{[b.value]:k.value,[Fe.value[0]]:k.value,[o.value]:k.value,__CREATE__:!0}]),Fe=j(()=>c.value?Array.isArray(c.value)?c.value:[c.value]:[o.value]),ga=te(()=>{switch(n.value){case"single":return null;case"multiple":case"tags":return[]}}),ba=te(()=>C.value||oe.value),ze=i=>{switch(typeof i!="object"&&(i=Ce(i)),n.value){case"single":J(i);break;case"multiple":case"tags":J(T.value.concat(i));break}a.emit("select",Wt(i),i,D)},Ke=i=>{switch(typeof i!="object"&&(i=Ce(i)),n.value){case"single":$t();break;case"tags":case"multiple":J(Array.isArray(i)?T.value.filter(g=>i.map(U=>U[b.value]).indexOf(g[b.value])===-1):T.value.filter(g=>g[b.value]!=i[b.value]));break}a.emit("deselect",Wt(i),i,D)},Wt=i=>S.value?i:i[b.value],Vt=i=>{Ke(i)},ha=(i,g)=>{if(g.button!==0){g.preventDefault();return}Vt(i)},$t=()=>{J(ga.value),a.emit("clear",D)},Pe=i=>{if(i.group!==void 0)return n.value==="single"?!1:ka(i[G.value])&&i[G.value].length;switch(n.value){case"single":return!Se(T.value)&&(T.value[b.value]==i[b.value]||typeof T.value[b.value]=="object"&&typeof i[b.value]=="object"&&na(T.value[b.value],i[b.value]));case"tags":case"multiple":return!Se(T.value)&&T.value.map(g=>g[b.value]).indexOf(i[b.value])!==-1}},St=i=>i[h.value]===!0,kt=()=>$===void 0||$.value===-1||!Ot.value&&$.value>0?!1:T.value.length>=$.value,ya=i=>{if(!St(i)){if(u.value&&!Pe(i)&&i.__CREATE__&&(i={...i},delete i.__CREATE__,i=u.value(i,D),i instanceof Promise)){oe.value=!0,i.then(g=>{oe.value=!1,Ut(g)});return}Ut(i)}},Ut=i=>{switch(i.__CREATE__&&(i={...i},delete i.__CREATE__),n.value){case"single":if(i&&Pe(i)){W.value&&Ke(i),Q.value&&(be(),se());return}i&&Lt(i),A.value&&K(),B.value&&(be(),se()),i&&ze(i);break;case"multiple":if(i&&Pe(i)){Ke(i),Q.value&&(be(),se());return}if(kt()){a.emit("max",D);return}i&&(Lt(i),ze(i)),A.value&&K(),s.value&&be(),B.value&&se();break;case"tags":if(i&&Pe(i)){Ke(i),Q.value&&(be(),se());return}if(kt()){a.emit("max",D);return}i&&Lt(i),A.value&&K(),i&&ze(i),s.value&&be(),B.value&&se();break}B.value||Ne()},wa=i=>{if(!(St(i)||n.value==="single"||!P.value)){switch(n.value){case"multiple":case"tags":Sa(i[G.value])?Ke(i[G.value]):ze(i[G.value].filter(g=>T.value.map(U=>U[b.value]).indexOf(g[b.value])===-1).filter(g=>!g[h.value]).filter((g,U)=>T.value.length+1+U<=$.value||$.value===-1)),s.value&&ae.value&&ie(wt.value.filter(g=>!g[h.value])[ae.value.index]);break}B.value&&re()}},Lt=i=>{Ce(i[b.value])===void 0&&et.value&&(a.emit("tag",i[b.value],D),a.emit("option",i[b.value],D),a.emit("create",i[b.value],D),tt.value&&Pa(i),K())},Oa=()=>{n.value!=="single"&&ze(Be.value.filter(i=>!i.disabled&&!Pe(i)))},Sa=i=>i.find(g=>!Pe(g)&&!g[h.value])===void 0,ka=i=>i.find(g=>!Pe(g))===void 0,Ce=i=>ye.value[ye.value.map(g=>String(g[b.value])).indexOf(String(i))],La=i=>ye.value.findIndex(g=>Fe.value.some(U=>(parseInt(g[U])==g[U]?parseInt(g[U]):g[U])===(parseInt(i)==i?parseInt(i):i))),xa=i=>["tags","multiple"].indexOf(n.value)!==-1&&s.value&&Pe(i),Pa=i=>{he.value.push(i)},Ca=i=>ge.value?i.filter(g=>k.value?g.__VISIBLE__.length:g[G.value].length):i.filter(g=>k.value?g.__VISIBLE__.length:!0),xt=(i,g=!0)=>{let U=i;if(k.value&&v.value){let le=ee.value;le||(le=(je,Gt,xr)=>Fe.value.some(Ea=>{let zt=At(Ae(je[Ea]),H.value);return F.value?zt.startsWith(At(Gt,H.value)):zt.indexOf(At(Gt,H.value))!==-1})),U=U.filter(je=>le(je,k.value,D))}return s.value&&g&&(U=U.filter(le=>!xa(le))),U},Pt=i=>{let g=i;return Va(g)&&(g=Object.keys(g).map(U=>{let le=g[U];return{[b.value]:U,[Fe.value[0]]:le,[o.value]:le}})),g&&Array.isArray(g)?g=g.map(U=>typeof U=="object"?U:{[b.value]:U,[Fe.value[0]]:U,[o.value]:U}):g=[],g},ot=()=>{Se(f.value)||(T.value=dt(f.value))},ut=i=>(oe.value=!0,new Promise((g,U)=>{r.value(k.value,D).then(le=>{ce.value=le||[],typeof i=="function"&&i(le),oe.value=!1}).catch(le=>{console.error(le),ce.value=[],oe.value=!1}).finally(()=>{g()})})),Ct=()=>{if(Ot.value)if(n.value==="single"){let i=Ce(T.value[b.value]);if(i!==void 0){let g=i[o.value];T.value[o.value]=g,S.value&&(f.value[o.value]=g)}}else T.value.forEach((i,g)=>{let U=Ce(T.value[g][b.value]);if(U!==void 0){let le=U[o.value];T.value[g][o.value]=le,S.value&&(f.value[g][o.value]=le)}})},Ta=i=>{ut(i)},dt=i=>Se(i)?n.value==="single"?{}:[]:S.value?i:n.value==="single"?Ce(i)||(N.value?{[o.value]:i,[b.value]:i,[Fe.value[0]]:i}:{}):i.filter(g=>!!Ce(g)||N.value).map(g=>Ce(g)||{[o.value]:g,[b.value]:g,[Fe.value[0]]:g}),Ht=()=>{ue.value=fe(k,i=>{i.length<q.value||!i&&q.value!==0||(oe.value=!0,x.value&&(ce.value=[]),setTimeout(()=>{i==k.value&&r.value(k.value,D).then(g=>{(i==k.value||!k.value)&&(ce.value=g,ae.value=Be.value.filter(U=>U[h.value]!==!0)[0]||null,oe.value=!1)}).catch(g=>{console.error(g)})},E.value))},{flush:"sync"})};if(n.value!=="single"&&!Se(f.value)&&!Array.isArray(f.value))throw new Error(`v-model must be an array when using "${n.value}" mode`);return r&&typeof r.value=="function"?O.value?ut(ot):S.value==!0&&ot():(ce.value=r.value,ot()),E.value>-1&&Ht(),fe(E,(i,g)=>{ue.value&&ue.value(),i>=0&&Ht()}),fe(f,i=>{if(Se(i)){J(dt(i),!1);return}switch(n.value){case"single":(S.value?i[b.value]!=T.value[b.value]:i!=T.value[b.value])&&J(dt(i),!1);break;case"multiple":case"tags":$a(S.value?i.map(g=>g[b.value]):i,T.value.map(g=>g[b.value]))||J(dt(i),!1);break}},{deep:!0}),fe(r,(i,g)=>{typeof e.options=="function"?O.value&&(!g||i&&i.toString()!==g.toString())&&ut():(ce.value=e.options,Object.keys(T.value).length||ot(),Ct())}),fe(o,Ct),fe(l,(i,g)=>{xe.value=X.value&&i===-1?10:i}),{resolvedOptions:st,pfo:at,fo:Be,filteredOptions:Be,hasSelected:Ot,multipleLabelText:va,eo:ye,extendedOptions:ye,eg:Me,extendedGroups:Me,fg:wt,filteredGroups:wt,noOptions:pa,noResults:ma,resolving:oe,busy:ba,offset:xe,select:ze,deselect:Ke,remove:Vt,selectAll:Oa,clear:$t,isSelected:Pe,isDisabled:St,isMax:kt,getOption:Ce,handleOptionClick:ya,handleGroupClick:wa,handleTagRemove:ha,refreshOptions:Ta,resolveOptions:ut,refreshLabels:Ct}}function Ha(e,a,t){const{valueProp:r,showOptions:n,searchable:c,groupLabel:l,groups:s,mode:p,groupSelect:m,disabledProp:o,groupOptions:w}=pe(e),L=t.fo,y=t.fg,S=t.handleOptionClick,C=t.handleGroupClick,E=t.search,O=t.pointer,q=t.setPointer,v=t.clearPointer,x=t.multiselect,A=t.isOpen,b=j(()=>L.value.filter(f=>!f[o.value])),N=j(()=>y.value.filter(f=>!f[o.value])),I=te(()=>p.value!=="single"&&m.value),W=te(()=>O.value&&O.value.group),$=j(()=>D(O.value)),H=j(()=>{const f=W.value?O.value:D(O.value),k=N.value.map(J=>J[l.value]).indexOf(f[l.value]);let K=N.value[k-1];return K===void 0&&(K=Q.value),K}),B=j(()=>{let f=N.value.map(k=>k.label).indexOf(W.value?O.value[l.value]:D(O.value)[l.value])+1;return N.value.length<=f&&(f=0),N.value[f]}),Q=j(()=>[...N.value].slice(-1)[0]),_=j(()=>O.value.__VISIBLE__.filter(f=>!f[o.value])[0]),ne=j(()=>{const f=$.value.__VISIBLE__.filter(k=>!k[o.value]);return f[f.map(k=>k[r.value]).indexOf(O.value[r.value])-1]}),X=j(()=>{const f=D(O.value).__VISIBLE__.filter(k=>!k[o.value]);return f[f.map(k=>k[r.value]).indexOf(O.value[r.value])+1]}),G=j(()=>[...H.value.__VISIBLE__.filter(f=>!f[o.value])].slice(-1)[0]),ge=j(()=>[...Q.value.__VISIBLE__.filter(f=>!f[o.value])].slice(-1)[0]),P=f=>O.value&&(!f.group&&O.value[r.value]===f[r.value]||f.group!==void 0&&O.value[l.value]===f[l.value])?!0:void 0,u=()=>{q(b.value[0]||null)},h=()=>{!O.value||O.value[o.value]===!0||(W.value?C(O.value):S(O.value))},F=()=>{if(O.value===null)q((s.value&&I.value?N.value[0].__CREATE__?b.value[0]:N.value[0]:b.value[0])||null);else if(s.value&&I.value){let f=W.value?_.value:X.value;f===void 0&&(f=B.value,f.__CREATE__&&(f=f[w.value][0])),q(f||null)}else{let f=b.value.map(k=>k[r.value]).indexOf(O.value[r.value])+1;b.value.length<=f&&(f=0),q(b.value[f]||null)}Qe(()=>{T()})},ee=()=>{if(O.value===null){let f=b.value[b.value.length-1];s.value&&I.value&&(f=ge.value,f===void 0&&(f=Q.value)),q(f||null)}else if(s.value&&I.value){let f=W.value?G.value:ne.value;f===void 0&&(f=W.value?H.value:$.value,f.__CREATE__&&(f=G.value,f===void 0&&(f=H.value))),q(f||null)}else{let f=b.value.map(k=>k[r.value]).indexOf(O.value[r.value])-1;f<0&&(f=b.value.length-1),q(b.value[f]||null)}Qe(()=>{T()})},D=f=>N.value.find(k=>k.__VISIBLE__.map(K=>K[r.value]).indexOf(f[r.value])!==-1),T=()=>{let f=x.value.querySelector("[data-pointed]");if(!f)return;let k=f.parentElement.parentElement;s.value&&(k=W.value?f.parentElement.parentElement.parentElement:f.parentElement.parentElement.parentElement.parentElement),f.offsetTop+f.offsetHeight>k.clientHeight+k.scrollTop&&(k.scrollTop=f.offsetTop+f.offsetHeight-k.clientHeight),f.offsetTop<k.scrollTop&&(k.scrollTop=f.offsetTop)};return fe(E,f=>{c.value&&(f.length&&n.value?u():v())}),fe(A,f=>{if(f&&x&&x.value){let k=x.value.querySelectorAll("[data-selected]")[0];if(!k)return;let K=k.parentElement.parentElement;Qe(()=>{K.scrollTop=k.offsetTop})}}),{pointer:O,canPointGroups:I,isPointed:P,setPointerFirst:u,selectPointer:h,forwardPointer:F,backwardPointer:ee}}function ve(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var a=e.ownerDocument;return a&&a.defaultView||window}return e}function He(e){var a=ve(e).Element;return e instanceof a||e instanceof Element}function me(e){var a=ve(e).HTMLElement;return e instanceof a||e instanceof HTMLElement}function Dt(e){if(typeof ShadowRoot>"u")return!1;var a=ve(e).ShadowRoot;return e instanceof a||e instanceof ShadowRoot}var Ue=Math.max,mt=Math.min,Xe=Math.round;function Bt(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(a){return a.brand+"/"+a.version}).join(" "):navigator.userAgent}function ra(){return!/^((?!chrome|android).)*safari/i.test(Bt())}function Je(e,a,t){a===void 0&&(a=!1),t===void 0&&(t=!1);var r=e.getBoundingClientRect(),n=1,c=1;a&&me(e)&&(n=e.offsetWidth>0&&Xe(r.width)/e.offsetWidth||1,c=e.offsetHeight>0&&Xe(r.height)/e.offsetHeight||1);var l=He(e)?ve(e):window,s=l.visualViewport,p=!ra()&&t,m=(r.left+(p&&s?s.offsetLeft:0))/n,o=(r.top+(p&&s?s.offsetTop:0))/c,w=r.width/n,L=r.height/c;return{width:w,height:L,top:o,right:m+w,bottom:o+L,left:m,x:m,y:o}}function Rt(e){var a=ve(e),t=a.pageXOffset,r=a.pageYOffset;return{scrollLeft:t,scrollTop:r}}function Ga(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function za(e){return e===ve(e)||!me(e)?Rt(e):Ga(e)}function ke(e){return e?(e.nodeName||"").toLowerCase():null}function Ie(e){return((He(e)?e.ownerDocument:e.document)||window.document).documentElement}function It(e){return Je(Ie(e)).left+Rt(e).scrollLeft}function Ee(e){return ve(e).getComputedStyle(e)}function Nt(e){var a=Ee(e),t=a.overflow,r=a.overflowX,n=a.overflowY;return/auto|scroll|overlay|hidden/.test(t+n+r)}function Ka(e){var a=e.getBoundingClientRect(),t=Xe(a.width)/e.offsetWidth||1,r=Xe(a.height)/e.offsetHeight||1;return t!==1||r!==1}function Ya(e,a,t){t===void 0&&(t=!1);var r=me(a),n=me(a)&&Ka(a),c=Ie(a),l=Je(e,n,t),s={scrollLeft:0,scrollTop:0},p={x:0,y:0};return(r||!r&&!t)&&((ke(a)!=="body"||Nt(c))&&(s=za(a)),me(a)?(p=Je(a,!0),p.x+=a.clientLeft,p.y+=a.clientTop):c&&(p.x=It(c))),{x:l.left+s.scrollLeft-p.x,y:l.top+s.scrollTop-p.y,width:l.width,height:l.height}}function ia(e){var a=Je(e),t=e.offsetWidth,r=e.offsetHeight;return Math.abs(a.width-t)<=1&&(t=a.width),Math.abs(a.height-r)<=1&&(r=a.height),{x:e.offsetLeft,y:e.offsetTop,width:t,height:r}}function bt(e){return ke(e)==="html"?e:e.assignedSlot||e.parentNode||(Dt(e)?e.host:null)||Ie(e)}function sa(e){return["html","body","#document"].indexOf(ke(e))>=0?e.ownerDocument.body:me(e)&&Nt(e)?e:sa(bt(e))}function nt(e,a){var t;a===void 0&&(a=[]);var r=sa(e),n=r===((t=e.ownerDocument)==null?void 0:t.body),c=ve(r),l=n?[c].concat(c.visualViewport||[],Nt(r)?r:[]):r,s=a.concat(l);return n?s:s.concat(nt(bt(l)))}function Qa(e){return["table","td","th"].indexOf(ke(e))>=0}function Xt(e){return!me(e)||Ee(e).position==="fixed"?null:e.offsetParent}function Xa(e){var a=/firefox/i.test(Bt()),t=/Trident/i.test(Bt());if(t&&me(e)){var r=Ee(e);if(r.position==="fixed")return null}var n=bt(e);for(Dt(n)&&(n=n.host);me(n)&&["html","body"].indexOf(ke(n))<0;){var c=Ee(n);if(c.transform!=="none"||c.perspective!=="none"||c.contain==="paint"||["transform","perspective"].indexOf(c.willChange)!==-1||a&&c.willChange==="filter"||a&&c.filter&&c.filter!=="none")return n;n=n.parentNode}return null}function ht(e){for(var a=ve(e),t=Xt(e);t&&Qa(t)&&Ee(t).position==="static";)t=Xt(t);return t&&(ke(t)==="html"||ke(t)==="body"&&Ee(t).position==="static")?a:t||Xa(e)||a}var we="top",Le="bottom",Re="right",Te="left",Mt="auto",yt=[we,Le,Re,Te],Ze="start",rt="end",Ja="clippingParents",oa="viewport",lt="popper",Za="reference",Jt=yt.reduce(function(e,a){return e.concat([a+"-"+Ze,a+"-"+rt])},[]),_a=[].concat(yt,[Mt]).reduce(function(e,a){return e.concat([a,a+"-"+Ze,a+"-"+rt])},[]),el="beforeRead",tl="read",al="afterRead",ll="beforeMain",nl="main",rl="afterMain",il="beforeWrite",sl="write",ol="afterWrite",ul=[el,tl,al,ll,nl,rl,il,sl,ol];function dl(e){var a=new Map,t=new Set,r=[];e.forEach(function(c){a.set(c.name,c)});function n(c){t.add(c.name);var l=[].concat(c.requires||[],c.requiresIfExists||[]);l.forEach(function(s){if(!t.has(s)){var p=a.get(s);p&&n(p)}}),r.push(c)}return e.forEach(function(c){t.has(c.name)||n(c)}),r}function cl(e){var a=dl(e);return ul.reduce(function(t,r){return t.concat(a.filter(function(n){return n.phase===r}))},[])}function fl(e){var a;return function(){return a||(a=new Promise(function(t){Promise.resolve().then(function(){a=void 0,t(e())})})),a}}function vl(e){var a=e.reduce(function(t,r){var n=t[r.name];return t[r.name]=n?Object.assign({},n,r,{options:Object.assign({},n.options,r.options),data:Object.assign({},n.data,r.data)}):r,t},{});return Object.keys(a).map(function(t){return a[t]})}function pl(e,a){var t=ve(e),r=Ie(e),n=t.visualViewport,c=r.clientWidth,l=r.clientHeight,s=0,p=0;if(n){c=n.width,l=n.height;var m=ra();(m||!m&&a==="fixed")&&(s=n.offsetLeft,p=n.offsetTop)}return{width:c,height:l,x:s+It(e),y:p}}function ml(e){var a,t=Ie(e),r=Rt(e),n=(a=e.ownerDocument)==null?void 0:a.body,c=Ue(t.scrollWidth,t.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),l=Ue(t.scrollHeight,t.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),s=-r.scrollLeft+It(e),p=-r.scrollTop;return Ee(n||t).direction==="rtl"&&(s+=Ue(t.clientWidth,n?n.clientWidth:0)-c),{width:c,height:l,x:s,y:p}}function gl(e,a){var t=a.getRootNode&&a.getRootNode();if(e.contains(a))return!0;if(t&&Dt(t)){var r=a;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function qt(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function bl(e,a){var t=Je(e,!1,a==="fixed");return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function Zt(e,a,t){return a===oa?qt(pl(e,t)):He(a)?bl(a,t):qt(ml(Ie(e)))}function hl(e){var a=nt(bt(e)),t=["absolute","fixed"].indexOf(Ee(e).position)>=0,r=t&&me(e)?ht(e):e;return He(r)?a.filter(function(n){return He(n)&&gl(n,r)&&ke(n)!=="body"}):[]}function yl(e,a,t,r){var n=a==="clippingParents"?hl(e):[].concat(a),c=[].concat(n,[t]),l=c[0],s=c.reduce(function(p,m){var o=Zt(e,m,r);return p.top=Ue(o.top,p.top),p.right=mt(o.right,p.right),p.bottom=mt(o.bottom,p.bottom),p.left=Ue(o.left,p.left),p},Zt(e,l,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function De(e){return e.split("-")[0]}function _e(e){return e.split("-")[1]}function ua(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function da(e){var a=e.reference,t=e.element,r=e.placement,n=r?De(r):null,c=r?_e(r):null,l=a.x+a.width/2-t.width/2,s=a.y+a.height/2-t.height/2,p;switch(n){case we:p={x:l,y:a.y-t.height};break;case Le:p={x:l,y:a.y+a.height};break;case Re:p={x:a.x+a.width,y:s};break;case Te:p={x:a.x-t.width,y:s};break;default:p={x:a.x,y:a.y}}var m=n?ua(n):null;if(m!=null){var o=m==="y"?"height":"width";switch(c){case Ze:p[m]=p[m]-(a[o]/2-t[o]/2);break;case rt:p[m]=p[m]+(a[o]/2-t[o]/2);break}}return p}function ca(){return{top:0,right:0,bottom:0,left:0}}function wl(e){return Object.assign({},ca(),e)}function Ol(e,a){return a.reduce(function(t,r){return t[r]=e,t},{})}function Ft(e,a){a===void 0&&(a={});var t=a,r=t.placement,n=r===void 0?e.placement:r,c=t.strategy,l=c===void 0?e.strategy:c,s=t.boundary,p=s===void 0?Ja:s,m=t.rootBoundary,o=m===void 0?oa:m,w=t.elementContext,L=w===void 0?lt:w,y=t.altBoundary,S=y===void 0?!1:y,C=t.padding,E=C===void 0?0:C,O=wl(typeof E!="number"?E:Ol(E,yt)),q=L===lt?Za:lt,v=e.rects.popper,x=e.elements[S?q:L],A=yl(He(x)?x:x.contextElement||Ie(e.elements.popper),p,o,l),b=Je(e.elements.reference),N=da({reference:b,element:v,placement:n}),I=qt(Object.assign({},v,N)),W=L===lt?I:b,$={top:A.top-W.top+O.top,bottom:W.bottom-A.bottom+O.bottom,left:A.left-W.left+O.left,right:W.right-A.right+O.right},H=e.modifiersData.offset;if(L===lt&&H){var B=H[n];Object.keys($).forEach(function(Q){var _=[Re,Le].indexOf(Q)>=0?1:-1,ne=[we,Le].indexOf(Q)>=0?"y":"x";$[Q]+=B[ne]*_})}return $}var _t={placement:"bottom",modifiers:[],strategy:"absolute"};function ea(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];return!a.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Sl(e){e===void 0&&(e={});var a=e,t=a.defaultModifiers,r=t===void 0?[]:t,n=a.defaultOptions,c=n===void 0?_t:n;return function(s,p,m){m===void 0&&(m=c);var o={placement:"bottom",orderedModifiers:[],options:Object.assign({},_t,c),modifiersData:{},elements:{reference:s,popper:p},attributes:{},styles:{}},w=[],L=!1,y={state:o,setOptions:function(O){var q=typeof O=="function"?O(o.options):O;C(),o.options=Object.assign({},c,o.options,q),o.scrollParents={reference:He(s)?nt(s):s.contextElement?nt(s.contextElement):[],popper:nt(p)};var v=cl(vl([].concat(r,o.options.modifiers)));return o.orderedModifiers=v.filter(function(x){return x.enabled}),S(),y.update()},forceUpdate:function(){if(!L){var O=o.elements,q=O.reference,v=O.popper;if(ea(q,v)){o.rects={reference:Ya(q,ht(v),o.options.strategy==="fixed"),popper:ia(v)},o.reset=!1,o.placement=o.options.placement,o.orderedModifiers.forEach(function($){return o.modifiersData[$.name]=Object.assign({},$.data)});for(var x=0;x<o.orderedModifiers.length;x++){if(o.reset===!0){o.reset=!1,x=-1;continue}var A=o.orderedModifiers[x],b=A.fn,N=A.options,I=N===void 0?{}:N,W=A.name;typeof b=="function"&&(o=b({state:o,options:I,name:W,instance:y})||o)}}}},update:fl(function(){return new Promise(function(E){y.forceUpdate(),E(o)})}),destroy:function(){C(),L=!0}};if(!ea(s,p))return y;y.setOptions(m).then(function(E){!L&&m.onFirstUpdate&&m.onFirstUpdate(E)});function S(){o.orderedModifiers.forEach(function(E){var O=E.name,q=E.options,v=q===void 0?{}:q,x=E.effect;if(typeof x=="function"){var A=x({state:o,name:O,instance:y,options:v}),b=function(){};w.push(A||b)}})}function C(){w.forEach(function(E){return E()}),w=[]}return y}}var ft={passive:!0};function kl(e){var a=e.state,t=e.instance,r=e.options,n=r.scroll,c=n===void 0?!0:n,l=r.resize,s=l===void 0?!0:l,p=ve(a.elements.popper),m=[].concat(a.scrollParents.reference,a.scrollParents.popper);return c&&m.forEach(function(o){o.addEventListener("scroll",t.update,ft)}),s&&p.addEventListener("resize",t.update,ft),function(){c&&m.forEach(function(o){o.removeEventListener("scroll",t.update,ft)}),s&&p.removeEventListener("resize",t.update,ft)}}var Ll={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:kl,data:{}};function xl(e){var a=e.state,t=e.name;a.modifiersData[t]=da({reference:a.rects.reference,element:a.rects.popper,placement:a.placement})}var Pl={name:"popperOffsets",enabled:!0,phase:"read",fn:xl,data:{}},Cl={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Tl(e,a){var t=e.x,r=e.y,n=a.devicePixelRatio||1;return{x:Xe(t*n)/n||0,y:Xe(r*n)/n||0}}function ta(e){var a,t=e.popper,r=e.popperRect,n=e.placement,c=e.variation,l=e.offsets,s=e.position,p=e.gpuAcceleration,m=e.adaptive,o=e.roundOffsets,w=e.isFixed,L=l.x,y=L===void 0?0:L,S=l.y,C=S===void 0?0:S,E=typeof o=="function"?o({x:y,y:C}):{x:y,y:C};y=E.x,C=E.y;var O=l.hasOwnProperty("x"),q=l.hasOwnProperty("y"),v=Te,x=we,A=window;if(m){var b=ht(t),N="clientHeight",I="clientWidth";if(b===ve(t)&&(b=Ie(t),Ee(b).position!=="static"&&s==="absolute"&&(N="scrollHeight",I="scrollWidth")),b=b,n===we||(n===Te||n===Re)&&c===rt){x=Le;var W=w&&b===A&&A.visualViewport?A.visualViewport.height:b[N];C-=W-r.height,C*=p?1:-1}if(n===Te||(n===we||n===Le)&&c===rt){v=Re;var $=w&&b===A&&A.visualViewport?A.visualViewport.width:b[I];y-=$-r.width,y*=p?1:-1}}var H=Object.assign({position:s},m&&Cl),B=o===!0?Tl({x:y,y:C},ve(t)):{x:y,y:C};if(y=B.x,C=B.y,p){var Q;return Object.assign({},H,(Q={},Q[x]=q?"0":"",Q[v]=O?"0":"",Q.transform=(A.devicePixelRatio||1)<=1?"translate("+y+"px, "+C+"px)":"translate3d("+y+"px, "+C+"px, 0)",Q))}return Object.assign({},H,(a={},a[x]=q?C+"px":"",a[v]=O?y+"px":"",a.transform="",a))}function El(e){var a=e.state,t=e.options,r=t.gpuAcceleration,n=r===void 0?!0:r,c=t.adaptive,l=c===void 0?!0:c,s=t.roundOffsets,p=s===void 0?!0:s,m={placement:De(a.placement),variation:_e(a.placement),popper:a.elements.popper,popperRect:a.rects.popper,gpuAcceleration:n,isFixed:a.options.strategy==="fixed"};a.modifiersData.popperOffsets!=null&&(a.styles.popper=Object.assign({},a.styles.popper,ta(Object.assign({},m,{offsets:a.modifiersData.popperOffsets,position:a.options.strategy,adaptive:l,roundOffsets:p})))),a.modifiersData.arrow!=null&&(a.styles.arrow=Object.assign({},a.styles.arrow,ta(Object.assign({},m,{offsets:a.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:p})))),a.attributes.popper=Object.assign({},a.attributes.popper,{"data-popper-placement":a.placement})}var Al={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:El,data:{}};function Bl(e){var a=e.state;Object.keys(a.elements).forEach(function(t){var r=a.styles[t]||{},n=a.attributes[t]||{},c=a.elements[t];!me(c)||!ke(c)||(Object.assign(c.style,r),Object.keys(n).forEach(function(l){var s=n[l];s===!1?c.removeAttribute(l):c.setAttribute(l,s===!0?"":s)}))})}function ql(e){var a=e.state,t={popper:{position:a.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(a.elements.popper.style,t.popper),a.styles=t,a.elements.arrow&&Object.assign(a.elements.arrow.style,t.arrow),function(){Object.keys(a.elements).forEach(function(r){var n=a.elements[r],c=a.attributes[r]||{},l=Object.keys(a.styles.hasOwnProperty(r)?a.styles[r]:t[r]),s=l.reduce(function(p,m){return p[m]="",p},{});!me(n)||!ke(n)||(Object.assign(n.style,s),Object.keys(c).forEach(function(p){n.removeAttribute(p)}))})}}var Dl={name:"applyStyles",enabled:!0,phase:"write",fn:Bl,effect:ql,requires:["computeStyles"]},Rl=[Ll,Pl,Al,Dl],Il=Sl({defaultModifiers:Rl});function Nl(e){return e==="x"?"y":"x"}function vt(e,a,t){return Ue(e,mt(a,t))}function Ml(e,a,t){var r=vt(e,a,t);return r>t?t:r}function Fl(e){var a=e.state,t=e.options,r=e.name,n=t.mainAxis,c=n===void 0?!0:n,l=t.altAxis,s=l===void 0?!1:l,p=t.boundary,m=t.rootBoundary,o=t.altBoundary,w=t.padding,L=t.tether,y=L===void 0?!0:L,S=t.tetherOffset,C=S===void 0?0:S,E=Ft(a,{boundary:p,rootBoundary:m,padding:w,altBoundary:o}),O=De(a.placement),q=_e(a.placement),v=!q,x=ua(O),A=Nl(x),b=a.modifiersData.popperOffsets,N=a.rects.reference,I=a.rects.popper,W=typeof C=="function"?C(Object.assign({},a.rects,{placement:a.placement})):C,$=typeof W=="number"?{mainAxis:W,altAxis:W}:Object.assign({mainAxis:0,altAxis:0},W),H=a.modifiersData.offset?a.modifiersData.offset[a.placement]:null,B={x:0,y:0};if(b){if(c){var Q,_=x==="y"?we:Te,ne=x==="y"?Le:Re,X=x==="y"?"height":"width",G=b[x],ge=G+E[_],P=G-E[ne],u=y?-I[X]/2:0,h=q===Ze?N[X]:I[X],F=q===Ze?-I[X]:-N[X],ee=a.elements.arrow,D=y&&ee?ia(ee):{width:0,height:0},T=a.modifiersData["arrow#persistent"]?a.modifiersData["arrow#persistent"].padding:ca(),f=T[_],k=T[ne],K=vt(0,N[X],D[X]),J=v?N[X]/2-u-K-f-$.mainAxis:h-K-f-$.mainAxis,ae=v?-N[X]/2+u+K+k+$.mainAxis:F+K+k+$.mainAxis,ie=a.elements.arrow&&ht(a.elements.arrow),be=ie?x==="y"?ie.clientTop||0:ie.clientLeft||0:0,Ne=(Q=H?.[x])!=null?Q:0,re=G+J-Ne-be,se=G+ae-Ne,Ae=vt(y?mt(ge,re):ge,G,y?Ue(P,se):P);b[x]=Ae,B[x]=Ae-G}if(s){var he,ce=x==="x"?we:Te,oe=x==="x"?Le:Re,ue=b[A],xe=A==="y"?"height":"width",st=ue+E[ce],et=ue-E[oe],tt=[we,Te].indexOf(O)!==-1,ye=(he=H?.[A])!=null?he:0,at=tt?st:ue-N[xe]-I[xe]-ye+$.altAxis,Be=tt?ue+N[xe]+I[xe]-ye-$.altAxis:et,Me=y&&tt?Ml(at,ue,Be):vt(y?at:st,ue,y?Be:et);b[A]=Me,B[A]=Me-ue}a.modifiersData[r]=B}}var jl={name:"preventOverflow",enabled:!0,phase:"main",fn:Fl,requiresIfExists:["offset"]},Wl={left:"right",right:"left",bottom:"top",top:"bottom"};function pt(e){return e.replace(/left|right|bottom|top/g,function(a){return Wl[a]})}var Vl={start:"end",end:"start"};function aa(e){return e.replace(/start|end/g,function(a){return Vl[a]})}function $l(e,a){a===void 0&&(a={});var t=a,r=t.placement,n=t.boundary,c=t.rootBoundary,l=t.padding,s=t.flipVariations,p=t.allowedAutoPlacements,m=p===void 0?_a:p,o=_e(r),w=o?s?Jt:Jt.filter(function(S){return _e(S)===o}):yt,L=w.filter(function(S){return m.indexOf(S)>=0});L.length===0&&(L=w);var y=L.reduce(function(S,C){return S[C]=Ft(e,{placement:C,boundary:n,rootBoundary:c,padding:l})[De(C)],S},{});return Object.keys(y).sort(function(S,C){return y[S]-y[C]})}function Ul(e){if(De(e)===Mt)return[];var a=pt(e);return[aa(e),a,aa(a)]}function Hl(e){var a=e.state,t=e.options,r=e.name;if(!a.modifiersData[r]._skip){for(var n=t.mainAxis,c=n===void 0?!0:n,l=t.altAxis,s=l===void 0?!0:l,p=t.fallbackPlacements,m=t.padding,o=t.boundary,w=t.rootBoundary,L=t.altBoundary,y=t.flipVariations,S=y===void 0?!0:y,C=t.allowedAutoPlacements,E=a.options.placement,O=De(E),q=O===E,v=p||(q||!S?[pt(E)]:Ul(E)),x=[E].concat(v).reduce(function(D,T){return D.concat(De(T)===Mt?$l(a,{placement:T,boundary:o,rootBoundary:w,padding:m,flipVariations:S,allowedAutoPlacements:C}):T)},[]),A=a.rects.reference,b=a.rects.popper,N=new Map,I=!0,W=x[0],$=0;$<x.length;$++){var H=x[$],B=De(H),Q=_e(H)===Ze,_=[we,Le].indexOf(B)>=0,ne=_?"width":"height",X=Ft(a,{placement:H,boundary:o,rootBoundary:w,altBoundary:L,padding:m}),G=_?Q?Re:Te:Q?Le:we;A[ne]>b[ne]&&(G=pt(G));var ge=pt(G),P=[];if(c&&P.push(X[B]<=0),s&&P.push(X[G]<=0,X[ge]<=0),P.every(function(D){return D})){W=H,I=!1;break}N.set(H,P)}if(I)for(var u=S?3:1,h=function(T){var f=x.find(function(k){var K=N.get(k);if(K)return K.slice(0,T).every(function(J){return J})});if(f)return W=f,"break"},F=u;F>0;F--){var ee=h(F);if(ee==="break")break}a.placement!==W&&(a.modifiersData[r]._skip=!0,a.placement=W,a.reset=!0)}}var Gl={name:"flip",enabled:!0,phase:"main",fn:Hl,requiresIfExists:["offset"],data:{_skip:!1}};function zl(e,a,t){const{disabled:r,appendTo:n,appendToBody:c,openDirection:l}=pe(e),s=it().proxy,p=t.multiselect,m=t.dropdown,o=z(!1),w=z(null),L=z(null),y=te(()=>n.value||c.value),S=te(()=>l.value==="top"&&L.value==="bottom"||l.value==="bottom"&&L.value!=="top"?"bottom":"top"),C=()=>{o.value||r.value||(o.value=!0,a.emit("open",s),y.value&&Qe(()=>{O()}))},E=()=>{o.value&&(o.value=!1,a.emit("close",s))},O=()=>{if(!w.value)return;let v=parseInt(window.getComputedStyle(m.value).borderTopWidth.replace("px","")),x=parseInt(window.getComputedStyle(m.value).borderBottomWidth.replace("px",""));w.value.setOptions(A=>({...A,modifiers:[...A.modifiers,{name:"offset",options:{offset:[0,(S.value==="top"?v:x)*-1]}}]})),w.value.update()},q=v=>{for(;v&&v!==document.body;){if(getComputedStyle(v).position==="fixed")return!0;v=v.parentElement}return!1};return gt(()=>{y.value&&(w.value=Il(p.value,m.value,{strategy:q(p.value)?"fixed":void 0,placement:l.value,modifiers:[jl,Gl,{name:"sameWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:v})=>{v.styles.popper.width=`${v.rects.reference.width}px`},effect:({state:v})=>{v.elements.popper.style.width=`${v.elements.reference.offsetWidth}px`}},{name:"toggleClass",enabled:!0,phase:"write",fn({state:v}){L.value=v.placement}}]}))}),Aa(()=>{!y.value||!w.value||(w.value.destroy(),w.value=null)}),{popper:w,isOpen:o,open:C,close:E,placement:S,updatePopper:O}}function Kl(e,a,t){const{searchable:r,disabled:n,clearOnBlur:c}=pe(e),l=t.input,s=t.open,p=t.close,m=t.clearSearch,o=t.isOpen,w=t.wrapper,L=t.tags,y=z(!1),S=z(!1),C=te(()=>r.value||n.value?-1:0),E=()=>{r.value&&l.value.blur(),w.value.blur()},O=()=>{r.value&&!n.value&&l.value.focus()},q=(I=!0)=>{n.value||(y.value=!0,I&&s())},v=()=>{y.value=!1,setTimeout(()=>{y.value||(p(),c.value&&m())},1)};return{tabindex:C,isActive:y,mouseClicked:S,blur:E,focus:O,activate:q,deactivate:v,handleFocusIn:I=>{I.target.closest("[data-tags]")&&I.target.nodeName!=="INPUT"||I.target.closest("[data-clear]")||q(S.value)},handleFocusOut:()=>{v()},handleCaretClick:()=>{v(),E()},handleMousedown:I=>{S.value=!0,o.value&&(I.target.isEqualNode(w.value)||I.target.isEqualNode(L.value))?setTimeout(()=>{v()},0):!o.value&&(document.activeElement.isEqualNode(w.value)||document.activeElement.isEqualNode(l.value))&&q(),setTimeout(()=>{S.value=!1},0)}}}function Yl(e,a,t){const{mode:r,addTagOn:n,openDirection:c,searchable:l,showOptions:s,valueProp:p,groups:m,addOptionOn:o,createTag:w,createOption:L,reverse:y}=pe(e),S=it().proxy,C=t.iv,E=t.update,O=t.deselect,q=t.search,v=t.setPointer,x=t.selectPointer,A=t.backwardPointer,b=t.forwardPointer,N=t.multiselect,I=t.wrapper,W=t.tags,$=t.isOpen,H=t.open,B=t.blur,Q=t.fo,_=te(()=>w.value||L.value||!1),ne=te(()=>n.value!==void 0?n.value:o.value!==void 0?o.value:["enter"]),X=()=>{r.value==="tags"&&!s.value&&_.value&&l.value&&!m.value&&v(Q.value[Q.value.map(P=>P[p.value]).indexOf(q.value)])};return{handleKeydown:P=>{a.emit("keydown",P,S);let u,h;switch(["ArrowLeft","ArrowRight","Enter"].indexOf(P.key)!==-1&&r.value==="tags"&&(u=[...N.value.querySelectorAll("[data-tags] > *")].filter(F=>F!==W.value),h=u.findIndex(F=>F===document.activeElement)),P.key){case"Backspace":if(r.value==="single"||l.value&&[null,""].indexOf(q.value)===-1||C.value.length===0)return;let F=C.value.filter(ee=>!ee.disabled&&ee.remove!==!1);F.length&&O(F[F.length-1]);break;case"Enter":if(P.preventDefault(),P.keyCode===229)return;if(h!==-1&&h!==void 0){E([...C.value].filter((ee,D)=>D!==h)),h===u.length-1&&(u.length-1?u[u.length-2].focus():l.value?W.value.querySelector("input").focus():I.value.focus());return}if(ne.value.indexOf("enter")===-1&&_.value)return;X(),x();break;case" ":if(!_.value&&!l.value){P.preventDefault(),X(),x();return}if(!_.value)return!1;if(ne.value.indexOf("space")===-1&&_.value)return;P.preventDefault(),X(),x();break;case"Tab":case";":case",":if(ne.value.indexOf(P.key.toLowerCase())===-1||!_.value)return;X(),x(),P.preventDefault();break;case"Escape":B();break;case"ArrowUp":if(P.preventDefault(),!s.value)return;$.value||H(),A();break;case"ArrowDown":if(P.preventDefault(),!s.value)return;$.value||H(),b();break;case"ArrowLeft":if(l.value&&W.value&&W.value.querySelector("input").selectionStart||P.shiftKey||r.value!=="tags"||!C.value||!C.value.length)return;P.preventDefault(),h===-1?u[u.length-1].focus():h>0&&u[h-1].focus();break;case"ArrowRight":if(h===-1||P.shiftKey||r.value!=="tags"||!C.value||!C.value.length)return;P.preventDefault(),u.length>h+1?u[h+1].focus():l.value?W.value.querySelector("input").focus():l.value||I.value.focus();break}},handleKeyup:P=>{a.emit("keyup",P,S)},preparePointer:X}}function Ql(e,a,t){const{classes:r,disabled:n,showOptions:c,breakTags:l}=pe(e),s=t.isOpen,p=t.isPointed,m=t.isSelected,o=t.isDisabled,w=t.isActive,L=t.canPointGroups,y=t.resolving,S=t.fo,C=t.placement,E=te(()=>({container:"multiselect",containerDisabled:"is-disabled",containerOpen:"is-open",containerOpenTop:"is-open-top",containerActive:"is-active",wrapper:"multiselect-wrapper",singleLabel:"multiselect-single-label",singleLabelText:"multiselect-single-label-text",multipleLabel:"multiselect-multiple-label",search:"multiselect-search",tags:"multiselect-tags",tag:"multiselect-tag",tagWrapper:"multiselect-tag-wrapper",tagWrapperBreak:"multiselect-tag-wrapper-break",tagDisabled:"is-disabled",tagRemove:"multiselect-tag-remove",tagRemoveIcon:"multiselect-tag-remove-icon",tagsSearchWrapper:"multiselect-tags-search-wrapper",tagsSearch:"multiselect-tags-search",tagsSearchCopy:"multiselect-tags-search-copy",placeholder:"multiselect-placeholder",caret:"multiselect-caret",caretOpen:"is-open",clear:"multiselect-clear",clearIcon:"multiselect-clear-icon",spinner:"multiselect-spinner",inifinite:"multiselect-inifite",inifiniteSpinner:"multiselect-inifite-spinner",dropdown:"multiselect-dropdown",dropdownTop:"is-top",dropdownHidden:"is-hidden",options:"multiselect-options",optionsTop:"is-top",group:"multiselect-group",groupLabel:"multiselect-group-label",groupLabelPointable:"is-pointable",groupLabelPointed:"is-pointed",groupLabelSelected:"is-selected",groupLabelDisabled:"is-disabled",groupLabelSelectedPointed:"is-selected is-pointed",groupLabelSelectedDisabled:"is-selected is-disabled",groupOptions:"multiselect-group-options",option:"multiselect-option",optionPointed:"is-pointed",optionSelected:"is-selected",optionDisabled:"is-disabled",optionSelectedPointed:"is-selected is-pointed",optionSelectedDisabled:"is-selected is-disabled",noOptions:"multiselect-no-options",noResults:"multiselect-no-results",fakeInput:"multiselect-fake-input",assist:"multiselect-assistive-text",spacer:"multiselect-spacer",...r.value})),O=te(()=>!!(s.value&&c.value&&(!y.value||y.value&&S.value.length)));return{classList:j(()=>{const v=E.value;return{container:[v.container].concat(n.value?v.containerDisabled:[]).concat(O.value&&C.value==="top"?v.containerOpenTop:[]).concat(O.value&&C.value!=="top"?v.containerOpen:[]).concat(w.value?v.containerActive:[]),wrapper:v.wrapper,spacer:v.spacer,singleLabel:v.singleLabel,singleLabelText:v.singleLabelText,multipleLabel:v.multipleLabel,search:v.search,tags:v.tags,tag:[v.tag].concat(n.value?v.tagDisabled:[]),tagWrapper:[v.tagWrapper,l.value?v.tagWrapperBreak:null],tagDisabled:v.tagDisabled,tagRemove:v.tagRemove,tagRemoveIcon:v.tagRemoveIcon,tagsSearchWrapper:v.tagsSearchWrapper,tagsSearch:v.tagsSearch,tagsSearchCopy:v.tagsSearchCopy,placeholder:v.placeholder,caret:[v.caret].concat(s.value?v.caretOpen:[]),clear:v.clear,clearIcon:v.clearIcon,spinner:v.spinner,inifinite:v.inifinite,inifiniteSpinner:v.inifiniteSpinner,dropdown:[v.dropdown].concat(C.value==="top"?v.dropdownTop:[]).concat(!s.value||!c.value||!O.value?v.dropdownHidden:[]),options:[v.options].concat(C.value==="top"?v.optionsTop:[]),group:v.group,groupLabel:x=>{let A=[v.groupLabel];return p(x)?A.push(m(x)?v.groupLabelSelectedPointed:v.groupLabelPointed):m(x)&&L.value?A.push(o(x)?v.groupLabelSelectedDisabled:v.groupLabelSelected):o(x)&&A.push(v.groupLabelDisabled),L.value&&A.push(v.groupLabelPointable),A},groupOptions:v.groupOptions,option:(x,A)=>{let b=[v.option];return p(x)?b.push(m(x)?v.optionSelectedPointed:v.optionPointed):m(x)?b.push(o(x)?v.optionSelectedDisabled:v.optionSelected):(o(x)||A&&o(A))&&b.push(v.optionDisabled),b},noOptions:v.noOptions,noResults:v.noResults,assist:v.assist,fakeInput:v.fakeInput}}),showDropdown:O}}function Xl(e,a,t){const{limit:r,infinite:n}=pe(e),c=t.isOpen,l=t.offset,s=t.search,p=t.pfo,m=t.eo,o=z(null),w=Ye(null),L=te(()=>l.value<p.value.length),y=C=>{const{isIntersecting:E,target:O}=C[0];if(E){const q=O.offsetParent,v=q.scrollTop;l.value+=r.value==-1?10:r.value,Qe(()=>{q.scrollTop=v})}},S=()=>{c.value&&l.value<p.value.length?o.value.observe(w.value):!c.value&&o.value&&o.value.disconnect()};return fe(c,()=>{n.value&&S()}),fe(s,()=>{n.value&&(l.value=r.value,S())},{flush:"post"}),fe(m,()=>{n.value&&S()},{immediate:!1,flush:"post"}),gt(()=>{window&&window.IntersectionObserver&&(o.value=new IntersectionObserver(y))}),{hasMore:L,infiniteLoader:w}}function Jl(e,a,t){const{placeholder:r,id:n,valueProp:c,label:l,mode:s,groupLabel:p,aria:m,searchable:o}=pe(e),w=t.pointer,L=t.iv,y=t.hasSelected,S=t.multipleLabelText,C=z(null),E=te(()=>`${n.value?n.value+"-":""}assist`),O=te(()=>`${n.value?n.value+"-":""}multiselect-options`),q=te(()=>{if(w.value){let B=n.value?`${n.value}-`:"";return B+=`${w.value.group?"multiselect-group":"multiselect-option"}-`,B+=w.value.group?w.value.index:w.value[c.value],B}}),v=te(()=>r.value),x=te(()=>s.value!=="single"),A=j(()=>s.value==="single"&&y.value?L.value[l.value]:s.value==="multiple"&&y.value?S.value:s.value==="tags"&&y.value?L.value.map(B=>B[l.value]).join(", "):""),b=j(()=>{let B={...m.value};return o.value&&(B["aria-labelledby"]=B["aria-labelledby"]?`${E.value} ${B["aria-labelledby"]}`:E.value,A.value&&B["aria-label"]&&(B["aria-label"]=`${A.value}, ${B["aria-label"]}`)),B}),N=B=>`${n.value?n.value+"-":""}multiselect-option-${B[c.value]}`,I=B=>`${n.value?n.value+"-":""}multiselect-group-${B.index}`,W=B=>`${B}`,$=B=>`${B}`,H=B=>`${B} ❎`;return gt(()=>{if(n.value&&document&&document.querySelector){let B=document.querySelector(`[for="${n.value}"]`);C.value=B?B.innerText:null}}),{arias:b,ariaLabel:A,ariaAssist:E,ariaControls:O,ariaPlaceholder:v,ariaMultiselectable:x,ariaActiveDescendant:q,ariaOptionId:N,ariaOptionLabel:W,ariaGroupId:I,ariaGroupLabel:$,ariaTagLabel:H}}function Zl(e,a,t){const{locale:r,fallbackLocale:n}=pe(e);return{localize:l=>!l||typeof l!="object"?l:l&&l[r.value]?l[r.value]:l&&r.value&&l[r.value.toUpperCase()]?l[r.value.toUpperCase()]:l&&l[n.value]?l[n.value]:l&&n.value&&l[n.value.toUpperCase()]?l[n.value.toUpperCase()]:l&&Object.keys(l)[0]?l[Object.keys(l)[0]]:""}}function _l(e,a,t){const r=Ye(null),n=Ye(null),c=Ye(null),l=Ye(null),s=Ye(null);return{multiselect:r,wrapper:n,tags:c,input:l,dropdown:s}}function en(e,a,t,r={}){return t.forEach(n=>{r={...r,...n(e,a,r)}}),r}var jt={name:"Multiselect",emits:["paste","open","close","select","deselect","input","search-change","tag","option","update:modelValue","change","clear","keydown","keyup","max","create"],props:{value:{required:!1},modelValue:{required:!1},options:{type:[Array,Object,Function],required:!1,default:()=>[]},id:{type:[String,Number],required:!1,default:void 0},name:{type:[String,Number],required:!1,default:"multiselect"},disabled:{type:Boolean,required:!1,default:!1},label:{type:String,required:!1,default:"label"},trackBy:{type:[String,Array],required:!1,default:void 0},valueProp:{type:String,required:!1,default:"value"},placeholder:{type:String,required:!1,default:null},mode:{type:String,required:!1,default:"single"},searchable:{type:Boolean,required:!1,default:!1},limit:{type:Number,required:!1,default:-1},hideSelected:{type:Boolean,required:!1,default:!0},createTag:{type:Boolean,required:!1,default:void 0},createOption:{type:Boolean,required:!1,default:void 0},appendNewTag:{type:Boolean,required:!1,default:void 0},appendNewOption:{type:Boolean,required:!1,default:void 0},addTagOn:{type:Array,required:!1,default:void 0},addOptionOn:{type:Array,required:!1,default:void 0},caret:{type:Boolean,required:!1,default:!0},loading:{type:Boolean,required:!1,default:!1},noOptionsText:{type:[String,Object],required:!1,default:"The list is empty"},noResultsText:{type:[String,Object],required:!1,default:"No results found"},multipleLabel:{type:Function,required:!1,default:void 0},object:{type:Boolean,required:!1,default:!1},delay:{type:Number,required:!1,default:-1},minChars:{type:Number,required:!1,default:0},resolveOnLoad:{type:Boolean,required:!1,default:!0},filterResults:{type:Boolean,required:!1,default:!0},clearOnSearch:{type:Boolean,required:!1,default:!1},clearOnSelect:{type:Boolean,required:!1,default:!0},canDeselect:{type:Boolean,required:!1,default:!0},canClear:{type:Boolean,required:!1,default:!0},max:{type:Number,required:!1,default:-1},showOptions:{type:Boolean,required:!1,default:!0},required:{type:Boolean,required:!1,default:!1},openDirection:{type:String,required:!1,default:"bottom"},nativeSupport:{type:Boolean,required:!1,default:!1},classes:{type:Object,required:!1,default:()=>({})},strict:{type:Boolean,required:!1,default:!0},closeOnSelect:{type:Boolean,required:!1,default:!0},closeOnDeselect:{type:Boolean,required:!1,default:!1},autocomplete:{type:String,required:!1,default:void 0},groups:{type:Boolean,required:!1,default:!1},groupLabel:{type:String,required:!1,default:"label"},groupOptions:{type:String,required:!1,default:"options"},groupHideEmpty:{type:Boolean,required:!1,default:!1},groupSelect:{type:Boolean,required:!1,default:!0},inputType:{type:String,required:!1,default:"text"},attrs:{required:!1,type:Object,default:()=>({})},onCreate:{required:!1,type:Function,default:void 0},disabledProp:{type:String,required:!1,default:"disabled"},searchStart:{type:Boolean,required:!1,default:!1},reverse:{type:Boolean,required:!1,default:!1},regex:{type:[Object,String,RegExp],required:!1,default:void 0},rtl:{type:Boolean,required:!1,default:!1},infinite:{type:Boolean,required:!1,default:!1},aria:{required:!1,type:Object,default:()=>({})},clearOnBlur:{required:!1,type:Boolean,default:!0},locale:{required:!1,type:String,default:null},fallbackLocale:{required:!1,type:String,default:"en"},searchFilter:{required:!1,type:Function,default:null},allowAbsent:{required:!1,type:Boolean,default:!1},appendToBody:{required:!1,type:Boolean,default:!1},closeOnScroll:{required:!1,type:Boolean,default:!1},breakTags:{required:!1,type:Boolean,default:!1},appendTo:{required:!1,type:String,default:void 0}},setup(e,a){return en(e,a,[_l,Zl,Fa,Wa,zl,ja,Ma,Kl,Ua,Xl,Ha,Yl,Ql,Jl])},beforeMount(){(this.$root.constructor&&this.$root.constructor.version&&this.$root.constructor.version.match(/^2\./)||this.vueVersionMs===2)&&(this.$options.components.Teleport||(this.$options.components.Teleport={render(){return this.$slots.default?this.$slots.default[0]:null}}))}};const tn=["id","dir"],an=["tabindex","aria-controls","aria-placeholder","aria-expanded","aria-activedescendant","aria-multiselectable","role"],ln=["type","modelValue","value","autocomplete","id","aria-controls","aria-placeholder","aria-expanded","aria-activedescendant","aria-multiselectable"],nn=["onKeyup","aria-label"],rn=["onClick"],sn=["type","modelValue","value","id","autocomplete","aria-controls","aria-placeholder","aria-expanded","aria-activedescendant","aria-multiselectable"],on=["innerHTML"],un=["id"],dn=["id"],cn=["id","aria-label","aria-selected"],fn=["data-pointed","onMouseenter","onClick"],vn=["innerHTML"],pn=["aria-label"],mn=["data-pointed","data-selected","onMouseenter","onClick","id","aria-selected","aria-label"],gn=["data-pointed","data-selected","onMouseenter","onClick","id","aria-selected","aria-label"],bn=["innerHTML"],hn=["innerHTML"],yn=["value"],wn=["name","value"],On=["name","value"],Sn=["id"];function kn(e,a,t,r,n,c){return M(),V("div",{ref:"multiselect",class:Y(e.classList.container),id:t.searchable?void 0:t.id,dir:t.rtl?"rtl":void 0,onFocusin:a[12]||(a[12]=(...l)=>e.handleFocusIn&&e.handleFocusIn(...l)),onFocusout:a[13]||(a[13]=(...l)=>e.handleFocusOut&&e.handleFocusOut(...l)),onKeyup:a[14]||(a[14]=(...l)=>e.handleKeyup&&e.handleKeyup(...l)),onKeydown:a[15]||(a[15]=(...l)=>e.handleKeydown&&e.handleKeydown(...l))},[d("div",Tt({class:e.classList.wrapper,onMousedown:a[9]||(a[9]=(...l)=>e.handleMousedown&&e.handleMousedown(...l)),ref:"wrapper",tabindex:e.tabindex,"aria-controls":t.searchable?void 0:e.ariaControls,"aria-placeholder":t.searchable?void 0:e.ariaPlaceholder,"aria-expanded":t.searchable?void 0:e.isOpen,"aria-activedescendant":t.searchable?void 0:e.ariaActiveDescendant,"aria-multiselectable":t.searchable?void 0:e.ariaMultiselectable,role:t.searchable?void 0:"combobox"},t.searchable?{}:e.arias),[R(" Search "),t.mode!=="tags"&&t.searchable&&!t.disabled?(M(),V("input",Tt({key:0,type:t.inputType,modelValue:e.search,value:e.search,class:e.classList.search,autocomplete:t.autocomplete,id:t.searchable?t.id:void 0,onInput:a[0]||(a[0]=(...l)=>e.handleSearchInput&&e.handleSearchInput(...l)),onKeypress:a[1]||(a[1]=(...l)=>e.handleKeypress&&e.handleKeypress(...l)),onPaste:a[2]||(a[2]=Et((...l)=>e.handlePaste&&e.handlePaste(...l),["stop"])),ref:"input","aria-controls":e.ariaControls,"aria-placeholder":e.ariaPlaceholder,"aria-expanded":e.isOpen,"aria-activedescendant":e.ariaActiveDescendant,"aria-multiselectable":e.ariaMultiselectable,role:"combobox"},{...t.attrs,...e.arias}),null,16,ln)):R("v-if",!0),R(" Tags (with search) "),t.mode=="tags"?(M(),V("div",{key:1,class:Y(e.classList.tags),"data-tags":""},[(M(!0),V(qe,null,$e(e.iv,(l,s,p)=>de(e.$slots,"tag",{option:l,handleTagRemove:e.handleTagRemove,disabled:t.disabled},()=>[(M(),V("span",{class:Y([e.classList.tag,l.disabled?e.classList.tagDisabled:null]),tabindex:"-1",onKeyup:Kt(m=>e.handleTagRemove(l,m),["enter"]),key:p,"aria-label":e.ariaTagLabel(e.localize(l[t.label]))},[d("span",{class:Y(e.classList.tagWrapper)},Z(e.localize(l[t.label])),3),!t.disabled&&!l.disabled?(M(),V("span",{key:0,class:Y(e.classList.tagRemove),onClick:Et(m=>e.handleTagRemove(l,m),["stop"])},[d("span",{class:Y(e.classList.tagRemoveIcon)},null,2)],10,rn)):R("v-if",!0)],42,nn))])),256)),d("div",{class:Y(e.classList.tagsSearchWrapper),ref:"tags"},[R(" Used for measuring search width "),d("span",{class:Y(e.classList.tagsSearchCopy)},Z(e.search),3),R(" Actual search input "),t.searchable&&!t.disabled?(M(),V("input",Tt({key:0,type:t.inputType,modelValue:e.search,value:e.search,class:e.classList.tagsSearch,id:t.searchable?t.id:void 0,autocomplete:t.autocomplete,onInput:a[3]||(a[3]=(...l)=>e.handleSearchInput&&e.handleSearchInput(...l)),onKeypress:a[4]||(a[4]=(...l)=>e.handleKeypress&&e.handleKeypress(...l)),onPaste:a[5]||(a[5]=Et((...l)=>e.handlePaste&&e.handlePaste(...l),["stop"])),ref:"input","aria-controls":e.ariaControls,"aria-placeholder":e.ariaPlaceholder,"aria-expanded":e.isOpen,"aria-activedescendant":e.ariaActiveDescendant,"aria-multiselectable":e.ariaMultiselectable,role:"combobox"},{...t.attrs,...e.arias}),null,16,sn)):R("v-if",!0)],2)],2)):R("v-if",!0),R(" Single label "),t.mode=="single"&&e.hasSelected&&!e.search&&e.iv?de(e.$slots,"singlelabel",{key:2,value:e.iv},()=>[d("div",{class:Y(e.classList.singleLabel)},[d("span",{class:Y(e.classList.singleLabelText)},Z(e.localize(e.iv[t.label])),3)],2)]):R("v-if",!0),R(" Multiple label "),t.mode=="multiple"&&e.hasSelected&&!e.search?de(e.$slots,"multiplelabel",{key:3,values:e.iv},()=>[d("div",{class:Y(e.classList.multipleLabel),innerHTML:e.multipleLabelText},null,10,on)]):R("v-if",!0),R(" Placeholder "),t.placeholder&&!e.hasSelected&&!e.search?de(e.$slots,"placeholder",{key:4},()=>[d("div",{class:Y(e.classList.placeholder),"aria-hidden":"true"},Z(t.placeholder),3)]):R("v-if",!0),R(" Spinner "),t.loading||e.resolving?de(e.$slots,"spinner",{key:5},()=>[d("span",{class:Y(e.classList.spinner),"aria-hidden":"true"},null,2)]):R("v-if",!0),R(" Clear "),e.hasSelected&&!t.disabled&&t.canClear&&!e.busy?de(e.$slots,"clear",{key:6,clear:e.clear},()=>[d("span",{"aria-hidden":"true",tabindex:"0",role:"button","data-clear":"","aria-roledescription":"❎",class:Y(e.classList.clear),onClick:a[6]||(a[6]=(...l)=>e.clear&&e.clear(...l)),onKeyup:a[7]||(a[7]=Kt((...l)=>e.clear&&e.clear(...l),["enter"]))},[d("span",{class:Y(e.classList.clearIcon)},null,2)],34)]):R("v-if",!0),R(" Caret "),t.caret&&t.showOptions?de(e.$slots,"caret",{key:7,handleCaretClick:e.handleCaretClick,isOpen:e.isOpen},()=>[d("span",{class:Y(e.classList.caret),onClick:a[8]||(a[8]=(...l)=>e.handleCaretClick&&e.handleCaretClick(...l)),"aria-hidden":"true"},null,2)]):R("v-if",!0)],16,an),R(" Options "),(M(),la(Ba,{to:t.appendTo||"body",disabled:!t.appendToBody&&!t.appendTo},[d("div",{id:t.id?`${t.id}-dropdown`:void 0,class:Y(e.classList.dropdown),tabindex:"-1",ref:"dropdown",onFocusin:a[10]||(a[10]=(...l)=>e.handleFocusIn&&e.handleFocusIn(...l)),onFocusout:a[11]||(a[11]=(...l)=>e.handleFocusOut&&e.handleFocusOut(...l))},[de(e.$slots,"beforelist",{options:e.fo}),d("ul",{class:Y(e.classList.options),id:e.ariaControls,role:"listbox"},[t.groups?(M(!0),V(qe,{key:0},$e(e.fg,(l,s,p)=>(M(),V("li",{class:Y(e.classList.group),key:p,id:e.ariaGroupId(l),"aria-label":e.ariaGroupLabel(e.localize(l[t.groupLabel])),"aria-selected":e.isSelected(l),role:"option"},[l.__CREATE__?R("v-if",!0):(M(),V("div",{key:0,class:Y(e.classList.groupLabel(l)),"data-pointed":e.isPointed(l),onMouseenter:m=>e.setPointer(l,s),onClick:m=>e.handleGroupClick(l)},[de(e.$slots,"grouplabel",{group:l,isSelected:e.isSelected,isPointed:e.isPointed},()=>[d("span",{innerHTML:e.localize(l[t.groupLabel])},null,8,vn)])],42,fn)),d("ul",{class:Y(e.classList.groupOptions),"aria-label":e.ariaGroupLabel(e.localize(l[t.groupLabel])),role:"group"},[(M(!0),V(qe,null,$e(l.__VISIBLE__,(m,o,w)=>(M(),V("li",{class:Y(e.classList.option(m,l)),"data-pointed":e.isPointed(m),"data-selected":e.isSelected(m)||void 0,key:w,onMouseenter:L=>e.setPointer(m),onClick:L=>e.handleOptionClick(m),id:e.ariaOptionId(m),"aria-selected":e.isSelected(m),"aria-label":e.ariaOptionLabel(e.localize(m[t.label])),role:"option"},[de(e.$slots,"option",{option:m,isSelected:e.isSelected,isPointed:e.isPointed,search:e.search},()=>[d("span",null,Z(e.localize(m[t.label])),1)])],42,mn))),128))],10,pn)],10,cn))),128)):(M(!0),V(qe,{key:1},$e(e.fo,(l,s,p)=>(M(),V("li",{class:Y(e.classList.option(l)),"data-pointed":e.isPointed(l),"data-selected":e.isSelected(l)||void 0,key:p,onMouseenter:m=>e.setPointer(l),onClick:m=>e.handleOptionClick(l),id:e.ariaOptionId(l),"aria-selected":e.isSelected(l),"aria-label":e.ariaOptionLabel(e.localize(l[t.label])),role:"option"},[de(e.$slots,"option",{option:l,isSelected:e.isSelected,isPointed:e.isPointed,search:e.search},()=>[d("span",null,Z(e.localize(l[t.label])),1)])],42,gn))),128))],10,dn),e.noOptions?de(e.$slots,"nooptions",{key:0},()=>[d("div",{class:Y(e.classList.noOptions),innerHTML:e.localize(t.noOptionsText)},null,10,bn)]):R("v-if",!0),e.noResults?de(e.$slots,"noresults",{key:1},()=>[d("div",{class:Y(e.classList.noResults),innerHTML:e.localize(t.noResultsText)},null,10,hn)]):R("v-if",!0),t.infinite&&e.hasMore?(M(),V("div",{key:2,class:Y(e.classList.inifinite),ref:"infiniteLoader"},[de(e.$slots,"infinite",{},()=>[d("span",{class:Y(e.classList.inifiniteSpinner)},null,2)])],2)):R("v-if",!0),de(e.$slots,"afterlist",{options:e.fo})],42,un)],8,["to","disabled"])),R(" Hacky input element to show HTML5 required warning "),t.required?(M(),V("input",{key:0,class:Y(e.classList.fakeInput),tabindex:"-1",value:e.textValue,required:""},null,10,yn)):R("v-if",!0),R(" Native input support "),t.nativeSupport?(M(),V(qe,{key:1},[t.mode=="single"?(M(),V("input",{key:0,type:"hidden",name:t.name,value:e.plainValue!==void 0?e.plainValue:""},null,8,wn)):(M(!0),V(qe,{key:1},$e(e.plainValue,(l,s)=>(M(),V("input",{type:"hidden",name:`${t.name}[]`,value:l,key:s},null,8,On))),128))],64)):R("v-if",!0),R(" Screen reader assistive text "),t.searchable&&e.hasSelected?(M(),V("div",{key:2,class:Y(e.classList.assist),id:e.ariaAssist,"aria-hidden":"true"},Z(e.ariaLabel),11,Sn)):R("v-if",!0),R(" Create height for empty input "),d("div",{class:Y(e.classList.spacer)},null,2)],42,tn)}jt.render=kn;jt.__file="src/Multiselect.vue";const Ln={class:"mx-auto max-w-4xl"},xn={class:"rounded-lg bg-white p-4 shadow-md"},Pn={class:"grid grid-cols-1 items-end gap-6 md:grid-cols-4"},Cn={class:"md:col-span-2"},Tn=["disabled"],En={key:0},An={key:1},Bn={key:0,class:"mt-5"},qn={class:"rounded-lg bg-white p-4 shadow-md"},Dn={class:"mb-4 text-xl font-semibold"},Rn={class:"text-primary"},In={class:"mb-6 text-gray-600"},Nn={class:"overflow-x-auto"},Mn={key:0,class:"mb-2 flex items-center space-x-4 text-xs text-gray-500"},Fn={key:0,class:"flex items-center space-x-1"},jn={key:1,class:"flex items-center space-x-1"},Wn={class:"min-w-full"},Vn={class:"px-2 py-2"},$n={class:"flex items-center"},Un={class:"flex items-center"},Hn={key:0},Gn=["onClick"],zn={key:0,title:"มีการคำนวณ Yield",class:"ml-2 h-2 w-2 rounded-full bg-yellow-400"},Kn={key:1,title:"คิดต้นทุนเต็มหน่วย",class:"ml-2 h-2 w-2 rounded-full bg-orange-400"},Yn={key:0,class:"mt-1"},Qn=["onUpdate:modelValue"],Xn={class:"w-24 px-2 py-2 text-right"},Jn={class:"flex items-center justify-end"},Zn={class:"w-16 px-2 py-2 text-right"},_n={class:"flex items-center justify-end"},er={class:"mt-2 pr-2 text-right text-base font-bold"},tr={class:"mt-5 rounded-lg bg-white p-4 shadow-md"},ar={class:"mb-4 mt-4 grid grid-cols-1 gap-x-8 gap-y-6 md:grid-cols-2"},lr={class:"grid grid-cols-2 gap-4"},nr={class:"grid grid-cols-2 gap-4"},rr={class:"mb-8 mt-5 rounded-lg bg-white p-4 shadow-md"},ir={class:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4"},sr={class:"mt-2 pl-1 text-xs"},or={class:"pr-1 text-xs text-red-600"},ur={class:"mt-5 space-y-1"},dr={class:"flex items-center justify-between border-b pb-2 pt-2 text-base"},cr={class:"text-xs text-gray-600"},fr={class:"text-xl font-bold text-secondary"},vr={class:"flex items-center justify-between border-b py-2 text-base"},pr={class:"text-xl font-bold text-red-600"},mr={class:"flex items-center justify-between border-b py-2 text-base"},gr={class:"text-2xl font-bold text-green-600"},br={class:"flex items-center justify-between border-b py-2 text-base"},hr={class:"text-lg font-bold text-green-600"},yr={key:1,class:"py-10 text-center text-gray-500"},wr={key:0,class:"p-6"},Or={class:"mb-4 text-2xl font-semibold"},Sr={class:"list-inside list-disc space-y-2"},kr={class:"font-bold"},Lr={class:"mt-6 text-right"},Er={__name:"CostCalculatorView",setup(e){const a=z(null),t=Da(),r=z([]),n=z([]),c=z([]),l=z(null),s=z(10),p=z(50),m=z(0),o=z(0),w=z(0),L=z(0),y=z(0),S=z(null),C=z(!1),E=z(!1),O=z(null);fe([s,p],()=>{S.value=null});async function q(){try{const[P,u]=await Promise.all([ct.recipes.toArray(),ct.ingredients.toArray()]);r.value=P.filter(h=>!h.isSubRecipe),c.value=P.filter(h=>h.isSubRecipe),n.value=u}catch(P){console.error("Failed to fetch data:",P)}}gt(async()=>{await q();const P=await ct.settings.toArray(),u=new Map(P.map(h=>[h.key,h.value]));t.query.recipeId&&(l.value=Number(t.query.recipeId)),m.value=u.get("laborCostPerHour")||50,o.value=u.get("workHours")||4,w.value=u.get("overheadPercent")||30,y.value=u.get("defaultProfitMargin")||50});async function v(){if(l.value){C.value=!0,S.value=null;try{const P=await ct.recipes.get(l.value);if(!P.ingredientsList||P.ingredientsList.length===0)return;const u=Number(s.value||0)*Number(p.value||0);let h=P.ingredientsList.reduce((D,T)=>D+Number(T.quantity||0),0)||1;const F=u/h,ee=[];for(const D of P.ingredientsList){if(!D.quantity||D.quantity<=0)continue;const T=Number(D.quantity)*F;let f=0,k="",K=!1,J=null,ae=!1,ie=!1;const be=Number(D.yield||100)/100;be<1&&(ae=!0);const Ne=T/be;if(D.itemType==="ingredient"){const re=n.value.find(se=>se.id===D.itemId);if(re)if(k=re.name,J=re.id,D.costByWholeUnit&&re.purchaseUnit.toLowerCase()!=="กรัม"){ie=!0;const se=Number(re.standardWeightInGrams||1),Ae=Math.ceil(Ne/se),he=Number(re.purchasePrice)/Number(re.purchaseQuantity);f=Ae*he}else f=Ne*Number(re.costPerGram||0)}else if(D.itemType==="recipe"){const re=c.value.find(se=>se.id===D.itemId);if(re){k=re.name,K=!0,J=re.id;const se=await x(re,1),Ae=re.ingredientsList.reduce((oe,ue)=>oe+Number(ue.quantity||0),0)||1,ce=se.reduce((oe,ue)=>oe+ue.totalCost,0)/Ae;f=T*ce}}ee.push({name:k,quantity:T,cost:f,isSubRecipe:K,id:J,wastePercentage:K?10:0,appliedYield:ae,appliedWholeUnit:ie})}S.value={costBreakdown:ee,recipeName:P.name,totalWeight:u},await Qe(),a.value?.scrollIntoView({behavior:"smooth"})}catch(P){console.error("Calculation Error:",P)}finally{C.value=!1}}}async function x(P,u){const h=new Map;for(const F of P.ingredientsList){if(!F.quantity||typeof F.quantity!="number"||F.quantity<=0)continue;const ee=Number(F.quantity)*u,D=Number(F.yield||100)/100,T=ee/D;if(F.itemType==="ingredient"){const f=n.value.find(k=>k.id===F.itemId);if(f){let k=0,K=!1;if(F.costByWholeUnit&&f.purchaseUnit.toLowerCase()!=="กรัม"){K=!0;const J=Number(f.standardWeightInGrams||1),ae=Math.ceil(T/J),ie=Number(f.purchasePrice)/Number(f.purchaseQuantity);k=ae*ie}else k=T*Number(f.costPerGram||0);if(h.has(f.id)){const J=h.get(f.id);J.totalNetQuantity+=ee,J.totalCost+=k,K&&(J.appliedWholeUnit=!0),D<1&&(J.appliedYield=!0)}else h.set(f.id,{id:f.id,name:f.name,totalNetQuantity:ee,totalCost:k,appliedYield:D<1,appliedWholeUnit:K})}}else if(F.itemType==="recipe"){const f=c.value.find(k=>k.id===F.itemId);if(f){const k=f.ingredientsList.reduce((ae,ie)=>ae+Number(ie.quantity||0),0)||1,K=T/k;(await x(f,K)).forEach(ae=>{if(h.has(ae.id)){const ie=h.get(ae.id);ie.totalNetQuantity+=ae.totalNetQuantity,ie.totalCost+=ae.totalCost,ae.appliedWholeUnit&&(ie.appliedWholeUnit=!0),ae.appliedYield&&(ie.appliedYield=!0)}else h.set(ae.id,ae)})}}}return Array.from(h.values())}const A=j(()=>S.value?.costBreakdown.some(P=>P.appliedYield)),b=j(()=>S.value?.costBreakdown.some(P=>P.appliedWholeUnit)),N=j(()=>S.value?S.value.costBreakdown.map(P=>{const u=1+Number(P.wastePercentage||0)/100;return{...P,finalQuantity:P.quantity*u,finalCost:P.cost*u}}):[]),I=j(()=>N.value.reduce((P,u)=>P+u.finalCost,0));async function W(P,u){const h=c.value.find(F=>F.id===P);if(h){const F=[],ee=h.ingredientsList.reduce((T,f)=>T+Number(f.quantity||0),0)||1,D=Number(u||0)/ee;if(isNaN(D)){console.error("NaN detected in showSubRecipeDetails scalingFactor");return}for(const T of h.ingredientsList)if(!(!T.quantity||T.quantity<=0)&&T.itemType==="ingredient"){const f=n.value.find(k=>k.id===T.itemId);f&&F.push({name:f.name,quantity:Number(T.quantity)*D})}O.value={name:h.name,breakdown:F},E.value=!0}}const $=j(()=>Number(m.value||0)*Number(o.value||0)),H=j(()=>I.value*(Number(w.value||0)/100)),B=j(()=>I.value+$.value+H.value),Q=j(()=>!s.value||!B.value?0:B.value/Number(s.value||1)),_=j(()=>Q.value*(1+Number(y.value||0)/100));fe(_,P=>{L.value=parseFloat(P.toFixed(2))},{immediate:!0});const ne=j(()=>L.value*Number(s.value||0)),X=j(()=>S.value?ne.value-B.value:0),G=j(()=>s.value?X.value/Number(s.value||1):0),ge=j(()=>r.value.map(P=>({value:P.id,label:P.name})));return(P,u)=>(M(),V("div",Ln,[d("div",xn,[u[12]||(u[12]=d("h1",{class:"mb-6 text-3xl font-bold"},"คำนวณต้นทุน",-1)),d("div",Pn,[d("div",Cn,[u[9]||(u[9]=d("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"เลือกสูตรขนม",-1)),Yt(Qt(jt),{modelValue:l.value,"onUpdate:modelValue":u[0]||(u[0]=h=>l.value=h),options:ge.value,searchable:!0,placeholder:"-- เลือกหรือค้นหาสูตร --"},null,8,["modelValue","options"])]),d("div",null,[u[10]||(u[10]=d("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"จำนวนที่ต้องการผลิต (ชิ้น)",-1)),We(d("input",{"onUpdate:modelValue":u[1]||(u[1]=h=>s.value=h),type:"number",class:"w-full rounded-md border border-gray-300 px-3 py-2"},null,512),[[Ve,s.value,void 0,{number:!0}]])]),d("div",null,[u[11]||(u[11]=d("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"น้ำหนักต่อชิ้น (กรัม)",-1)),We(d("input",{"onUpdate:modelValue":u[2]||(u[2]=h=>p.value=h),type:"number",class:"w-full rounded-md border border-gray-300 px-3 py-2"},null,512),[[Ve,p.value,void 0,{number:!0}]])])]),d("div",{ref_key:"resultsSection",ref:a,class:"mt-5 text-right"},[d("button",{onClick:v,disabled:C.value,class:"rounded-lg bg-primary px-6 py-2 font-bold text-white transition-opacity hover:bg-opacity-90 disabled:opacity-50"},[C.value?(M(),V("span",En,"กำลังคำนวณ...")):(M(),V("span",An,"คำนวณต้นทุน"))],8,Tn)],512)]),S.value?(M(),V("div",Bn,[d("div",qn,[d("h2",Dn,[u[13]||(u[13]=Oe(" ต้นทุนสูตร: ")),d("span",Rn,Z(S.value.recipeName),1)]),d("p",In,[Oe(" สำหรับขนมจำนวน "+Z(s.value)+" ชิ้น",1),u[14]||(u[14]=d("br",null,null,-1)),Oe(" ขนาด "+Z(p.value)+" กรัม/ชิ้น ",1),u[15]||(u[15]=d("br",null,null,-1)),Oe(" (น้ำหนักรวม "+Z(S.value.totalWeight.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))+" กรัม) ",1)]),d("div",Nn,[A.value||b.value?(M(),V("div",Mn,[u[18]||(u[18]=d("span",null,"*ต้นทุนรวมได้คำนวณตาม:",-1)),A.value?(M(),V("div",Fn,u[16]||(u[16]=[d("span",{class:"h-2 w-2 rounded-full bg-yellow-400"},null,-1),d("span",null,"Yield",-1)]))):R("",!0),b.value?(M(),V("div",jn,u[17]||(u[17]=[d("span",{class:"h-2 w-2 rounded-full bg-orange-400"},null,-1),d("span",null,"หน่วยเต็ม",-1)]))):R("",!0)])):R("",!0),d("table",Wn,[u[21]||(u[21]=d("thead",{class:"border-t-2 border-gray-300"},[d("tr",{class:"border-b-2 border-gray-300"},[d("th",{class:"px-2 py-2 text-left text-sm font-semibold text-gray-700"}," วัตถุดิบ "),d("th",{class:"px-2 py-2 text-right text-sm font-semibold text-gray-700"}," ปริมาณ (กรัม) "),d("th",{class:"px-2 py-2 text-right text-sm font-semibold text-gray-700"}," ต้นทุน (บาท) ")])],-1)),d("tbody",null,[(M(!0),V(qe,null,$e(N.value,(h,F)=>(M(),V("tr",{key:`${h.name}-${F}`,class:"border-b border-gray-200"},[d("td",Vn,[d("div",$n,[d("span",null,[d("div",Un,[d("span",null,[Oe(Z(h.name)+" ",1),h.isSubRecipe?(M(),V("span",Hn,[d("button",{onClick:ee=>W(h.id,h.finalQuantity),class:"hover:text-blue-7-00 ml-2 text-blue-500"},[Yt(Qt(Ra),{icon:["fas","circle-info"]})],8,Gn)])):R("",!0)]),h.appliedYield?(M(),V("span",zn)):R("",!0),h.appliedWholeUnit?(M(),V("span",Kn)):R("",!0)]),h.isSubRecipe?(M(),V("div",Yn,[u[19]||(u[19]=d("span",{class:"text-xs"},"ทำเผื่อ ",-1)),We(d("input",{type:"number","onUpdate:modelValue":ee=>S.value.costBreakdown[F].wastePercentage=ee,class:"mr-1 w-16 rounded-md border px-1 text-right"},null,8,Qn),[[Ve,S.value.costBreakdown[F].wastePercentage,void 0,{number:!0}]]),u[20]||(u[20]=d("span",{class:"mr-2"},"%",-1))])):R("",!0)])])]),d("td",Xn,[d("div",Jn,Z(h.finalQuantity.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),d("td",Zn,[d("div",_n,Z(h.finalCost.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),1)])]))),128))])]),d("div",er,[u[22]||(u[22]=d("span",{class:"pr-2"},"ต้นทุนวัตถุดิบรวม",-1)),Oe(" "+Z(I.value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),1)])])]),d("div",tr,[u[27]||(u[27]=d("h3",{class:"mb-1 text-xl font-semibold text-secondary"}," ต้นทุนเพิ่มเติม ",-1)),u[28]||(u[28]=d("div",{class:"text-sm text-gray-700"}," (ใส่ 0 หรือปล่อยว่าง ในช่องที่ไม่ต้องการคิดทุน) ",-1)),d("div",ar,[d("div",lr,[d("div",null,[u[23]||(u[23]=d("label",{class:"block text-sm font-medium text-gray-700"},"ค่าแรง (บาท/ชม.)",-1)),We(d("input",{"onUpdate:modelValue":u[3]||(u[3]=h=>m.value=h),type:"number",class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2"},null,512),[[Ve,m.value,void 0,{number:!0}]])]),d("div",null,[u[24]||(u[24]=d("label",{class:"block text-sm font-medium text-gray-700"},"เวลาที่ใช้ (ชม.)",-1)),We(d("input",{"onUpdate:modelValue":u[4]||(u[4]=h=>o.value=h),type:"number",class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2"},null,512),[[Ve,o.value,void 0,{number:!0}]])])]),d("div",nr,[d("div",null,[u[25]||(u[25]=d("label",{class:"block text-sm font-medium text-gray-700"},"ต้นทุนแฝง",-1)),We(d("input",{"onUpdate:modelValue":u[5]||(u[5]=h=>w.value=h),type:"number",class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2"},null,512),[[Ve,w.value,void 0,{number:!0}]])]),u[26]||(u[26]=d("div",{class:"self-end pb-2 text-gray-600"},"% ของต้นทุนวัตถุดิบ",-1))])])]),d("div",rr,[d("div",null,[u[36]||(u[36]=d("h3",{class:"mb-4 text-xl font-semibold"},"สรุปต้นทุนและกำหนดราคาขาย",-1)),d("div",ir,[d("div",null,[u[31]||(u[31]=d("span",{class:"text-xl font-bold text-primary"},"ตั้งราคาขายต่อชิ้น ",-1)),We(d("input",{type:"number",step:"0.25","onUpdate:modelValue":u[6]||(u[6]=h=>L.value=h),class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 text-center text-3xl font-bold text-secondary"},null,512),[[Ve,L.value,void 0,{number:!0}]]),d("div",sr,[Oe(" - ราคาขายที่คำนวนมาเป็นราคา +"+Z(y.value)+"% จากต้นทุน",1),u[29]||(u[29]=d("br",null,null,-1)),u[30]||(u[30]=Oe(" - สามารถตั้งราคาใหม่ได้เพื่อดูกำไรที่ต้องการ ")),d("div",or," - (ราคาขายต่ำกว่า "+Z(Q.value.toFixed(2))+" บาทจะขาดทุน) ",1)])])]),u[37]||(u[37]=d("div",{class:"mt-5 space-y-1"},null,-1)),d("div",ur,[d("div",dr,[d("div",null,[u[32]||(u[32]=d("span",{class:"text-lg text-gray-700"},"ยอดขายทั้งหมด:",-1)),d("div",cr," (จำนวนขนม "+Z(s.value)+" ชิ้น) ",1)]),d("span",fr,Z(ne.value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))+" บาท",1)]),d("div",vr,[u[33]||(u[33]=d("div",null,[d("div",{class:"font-medium text-gray-600"},"ต้นทุนรวมทั้งหมด:"),d("div",{class:"text-xs text-gray-600"},"(วัตถุดิบ+น้ำไฟ+ค่าแรง)")],-1)),d("span",pr,Z(B.value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))+" บาท",1)]),d("div",mr,[u[34]||(u[34]=d("span",{class:"font-medium text-gray-600"},"กำไรทั้งหมด:",-1)),d("span",gr,Z(X.value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))+" บาท",1)]),d("div",br,[u[35]||(u[35]=d("span",{class:"text-gray-600"},"กำไรต่อชิ้น:",-1)),d("span",hr,Z(G.value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))+" บาท",1)])])])])])):R("",!0),!S.value&&!C.value?(M(),V("div",yr,u[38]||(u[38]=[d("p",null,"กรุณาเลือกสูตรและกรอกข้อมูลเพื่อคำนวณต้นทุน",-1)]))):R("",!0),E.value?(M(),la(Na,{key:2,onClose:u[8]||(u[8]=h=>E.value=!1)},{default:Ia(()=>[O.value?(M(),V("div",wr,[d("h3",Or," ส่วนประกอบของ: "+Z(O.value.name),1),d("ul",Sr,[(M(!0),V(qe,null,$e(O.value.breakdown,h=>(M(),V("li",{key:h.name},[Oe(Z(h.name)+": ",1),d("span",kr,Z(h.quantity.toFixed(2)),1),u[39]||(u[39]=Oe(" กรัม "))]))),128))]),d("div",Lr,[d("button",{onClick:u[7]||(u[7]=h=>E.value=!1),class:"rounded-md bg-primary px-4 py-2 text-white"}," ปิด ")])])):R("",!0)]),_:1})):R("",!0)]))}};export{Er as default};
